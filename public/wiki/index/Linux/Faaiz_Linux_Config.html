
<!DOCTYPE html>
<html
 lang="en-us"
  prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"
>
  





<head lang="en-us">
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light">
  <meta name="description" content="" />
  <meta name="author" content="">
  <meta name="keywords" content="115, 116, 114, 105, 110, 103, 91, 93">
  <title>Faaiz Linux Config - Ubuntu 20.04 on T480s</title>
  <link rel="canonical" href="//localhost:1313/blog/" />
  
    <link
      href="../blog/index.xml"
      rel="alternate"
      type="application/rss+xml"
      title="Faaiz Ajaz"
    />
  

  
  <meta property="og:type" content="website" />
  <meta property="og:description" content="" />
  <meta property="og:title" content="Blogs" />
  <meta property="og:site_name" content="Faaiz Ajaz" />
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:url" content="//localhost:1313/blog/" />
  <meta property="og:locale" content="en-us" />

  

  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Blogs | Faaiz Ajaz" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:domain" content="//localhost:1313/blog/" />

  
  
  
  
  

  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/modern-normalize@1.0.0/modern-normalize.min.css">

  
  
  

  

  
<link rel="stylesheet" href="./style.min.24dece96ebe77a911ff4af20cffc54f5b46ee96ad7e33f168e1af342b043ec26.css" integrity="sha256-JN7OluvnepEf9K8gz/xU9bRu6WrX4z8WjhrzQrBD7CY=" rel="preload stylesheet" as="style"/>
    

  
  
</head>

  <body>
    <script>
  const currentTheme = window.localStorage.getItem('theme')
  if (currentTheme === "dark") {
    document.body.classList.toggle("theme-dark");
  } else if (currentTheme == "light") {
    document.body.classList.toggle("theme-light");
  }
</script>
<header id="header">
  <div class="row">
    <div class="container has-padding nav">
      <button id="navbar-toggler" class="navbar-button" aria-hidden="true">











<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>





</button>
      <div class="navbar-brand">
        <a class="logo navbar-button" href="../" title="Faaiz Ajaz">
          <span>Faaiz Ajaz</span>
        </a>
      </div>
      <nav class="navbar" role="navigation">
        <ul>
          
          
            <li class="nav-bar-item">
              <a class="nav-link navbar-button" href="../" title="about">
                <span>about</span>
              </a>
            </li>
          
            <li class="nav-bar-item">
              <a class="nav-link navbar-button" href="../blog/" title="blog">
                <span>blog</span>
              </a>
            </li>
          
            <li class="nav-bar-item active">
              <a class="nav-link navbar-button" href="../wiki/" title="wiki">
                <span>wiki</span>
              </a>
            </li>
          
        </ul>
      </nav>
      <div class="theme-selector">
        <button class="button is-text" id="theme-selector-button" title="toggle theme">
          <span class="label icon">





<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 32C132.29 32 32 132.29 32 256s100.29 224 224 224 224-100.29 224-224S379.71 32 256 32zM128.72 383.28A180 180 0 01256 76v360a178.82 178.82 0 01-127.28-52.72z'/></svg>











</span>
        </button>
      </div>
    </div>
    <div class="container has-padding">
      <div class="breadcrumb">
        
<ol  class="breadcrumb-nav">
  

  

<li >
  <a href="../">Home</a>
</li>


<li class="active">
  <a href="../wiki/">Wiki</a>
</li>

</ol>




      </div>
    </div>
  </div>
</header>

    
<main id="main" class="list">
  <div class="container has-padding">
    
    
<!-- Wiki content -->

  <h1>Faaiz Linux Config - Ubuntu 20.04 on T480s</h1>

<p>
Tags: <span class="zim-tag">@linux</span> <span class="zim-tag">@ubuntu</span> <span class="zim-tag">@zsh</span> <span class="zim-tag">@themes</span> <span class="zim-tag">@sublime</span> <span class="zim-tag">@plugins</span> <span class="zim-tag">@service</span> <span class="zim-tag">@systemd</span> <span class="zim-tag">@throttle</span> <span class="zim-tag">@undervolt</span> 
</p>

<h2>Gnome Tweaks</h2>

<p>
Generally, Gnome tweak settings are backed up to home folder. So if you reinstall just the root partition, your tweaks will be mostly preserved except for themes, which are automatically set as soon as you install them. Alternatively, install themes, icons, and fonts in your home folder (create folders <tt>.themes</tt>, <tt>.icons</tt>, <tt>.fonts</tt> in your home folder and Ubuntu will automatically see them).
</p>

<p>
<i><b><u>I have done this, so as long as my home folder is backed up, I should not need to mess with these settings.</u></b></i>
</p>

<p>
I use the following themes:
</p>

<p>
<ul style='padding-left: 60pt'>
<li>Applications	Material Black Blueberry 3.36</li>
<li>Cursor			DMZ White</li>
<li>Icons			Papirus Dark</li>
<li>Shell			Material Black Blueberry 3.36</li>
<li>Fonts:
<ul>
<li>Interface		Roboto Bold 11</li>
<li>Document		Roboto Regular 11</li>
<li>Monospace	Roboto Mono for Powerline Regular 11</li>
<li>Legacy 		Roboto Bold 11</li>
</ul></li>
</ul>
</p>

<h2>Gnome Extensions</h2>

<p>
I use the following extensions. Extensions with a <tt>[*]</tt> have already been backed up using their native settings export feature.<br>
<ul style='padding-left: 30pt'>
<li>Blyr</li>
<li>Circular Battery indicator</li>
<li>CPU Power Manager</li>
<li>Dash to Panel <tt>[*]</tt> backed up to dotfiles repo on github</li>
<li>Freon</li>
<li>Impatience <tt>set to 0.5</tt></li>
<li>Multi Monitors Add-On <tt>all things unchecked</tt></li>
<li>Prime indicator</li>
<li>Remove Dropdown Arrows</li>
<li>Show apps top panel</li>
<li>user themes</li>
<li>Ubunutu Appindicators <tt>built-in</tt></li>
</ul>
</p>

<h2>Desktop</h2>

<p>
I use Nemo as my default file manager: &gt; <tt>sudo apt install nemo</tt><br>
Then, configure Nemo to be the default file manager: &gt; <tt>xdg-mime default nemo.desktop inode/directory application/x-gnome-saved-search</tt><br>
Finally, tell Nemo to handle the desktop icons:<br>
&gt; <tt>gsettings set org.gnome.desktop.background show-desktop-icons false</tt><br>
&gt; <tt>gsettings set org.nemo.desktop show-desktop-icons true</tt>
</p>

<p>
Also remember to add <tt>nemo-desktop</tt> to your list of startup apps<br>
Check if Nemo is defalt by doing: &gt; <tt>xdg-open $HOME</tt>
</p>

<h2>Terminal</h2>

<p>
I use <tt>Tilix</tt> with <tt>zsh</tt> and use <tt>oh-my-zsh</tt> as the theming framework.<br>
My <tt>zsh</tt> settings are in <a href="./Faaiz_Linux_Config/.zshrc" title="./.zshrc" class="file">./.zshrc</a> which is usually stored in <tt>~/.zshrc</tt><br>
My theme is a custom theme that should be added to <tt>~/.oh-my-zsh/themes/</tt>. The theme file is <a href="./Faaiz_Linux_Config/faaiz-zsh-theme.zsh-theme." title="./faaiz-zsh-theme.zsh-theme." class="file">./faaiz-zsh-theme.zsh-theme.</a> <br>
I have also updated the <tt>virtualenv_prompt_info</tt> function in <tt>~/.oh-my-zsh/plugins/virtualenv/virtualenv.plugin.zsh.</tt> The modified file is here: <a href="./Faaiz_Linux_Config/virtualenv.plugin.zsh" title="./virtualenv.plugin.zsh" class="file">./virtualenv.plugin.zsh</a><br>
For plugins, I use <tt>colored-man-pages</tt>, <tt>git</tt>, <tt>virtualenv</tt>, <tt>django</tt>, <tt>zsh-autosuggestions</tt>
</p>

<h2>SublimeText</h2>

<p>
Sublime settings are synced using the <tt>Sync Settings</tt> package. The backup is uploaded to my GitHub. However, just in case, these are the packages used:
</p>

<p>
<ul>
<li>UI Theme: <tt>Cyanide</tt></li>
<li>Color Scheme: <tt>Chromodynamics</tt></li>
<li><tt>Anaconda</tt></li>
<li><tt>ColorHints</tt></li>
<li><tt>Djaneiro</tt></li>
<li><tt>Git</tt></li>
<li><tt>Django</tt></li>
<li><tt>MagicPython</tt></li>
<li><tt>Python3</tt></li>
<li><tt>Terminus</tt></li>
</ul>
</p>

<h2>Fix wake from sleep problem</h2>

<p>
[ <i>See also: <a href="./CreatingServicesWithSystemD.html" title="Creating services with systemd" class="page">Creating services with systemd</a> </i>]
</p>

<p>
First, you need to do &gt; <tt>cat /proc/acpi/wakeup </tt>and find the codes for all the ones that are enabled (except power button). Then, for each one you want to disable, create a command in the service file. See the existing service file for command syntax. The 3 character codes  are what you need to change.
</p>

<p>
Here is my service file: <a href="./Faaiz_Linux_Config/disable-xhc-wakeup.service" title="./disable-xhc-wakeup.service" class="file">./disable-xhc-wakeup.service</a><br>
Then, copy to <tt>/etc/systemd/system</tt><br>
Then, give the service correct permissions &gt; <tt>sudo chmod 644 /etc/systemd/system/disable-xhc-wakeup.service</tt><br>
Start the service by &gt; <tt>sudo systemctl start disable-xhc-wakeup</tt><br>
Enable it to run at boot &gt; <tt>sudo systemctl enable disable-xhc-wakeup</tt><br>
Check status by &gt; <tt>sudo systemctl status disable-xhc-wakeup</tt>
</p>

<h2>Power settings</h2>

<p>
<ol type="1" start="1">
<li>Install TLP:
<ol type="a" start="1">
<li>&gt; <tt>sudo apt install tlp</tt></li>
<li>then run &gt; <tt>tlp-stat -b</tt></li>
<li>depending on output of above, <tt>apt install</tt> either <tt>acpi-call-dkms</tt> or <tt>tp-smapi-dkms</tt></li>
</ol>
</li>
<li>Install powertop</li>
<li>Fix the login screen date/time (if in Urdu):
<ol type="a" start="1">
<li>&gt; <tt>sudo update-locale LC_TIME=en_US.UTF-8</tt></li>
</ol>
</li>
<li>Install <tt>lenovo-throttling-fix</tt> from Github
<ol type="a" start="1">
<li>Make sure <tt>thermald</tt> isn't fucking up
<ol type="1" start="1">
<li>&gt; <tt>sudo systemctl stop thermald.service</tt></li>
<li>&gt; <tt>sudo systemctl disable thermald.service</tt></li>
<li>&gt; <tt>sudo systemctl mask thermald.service</tt></li>
</ol>
</li>
<li>Then go to <tt>/etc/lenovo_fix.conf</tt>
<ol type="1" start="1">
<li><tt>CORE -90</tt></li>
<li><tt>GPU -40</tt></li>
<li><tt>CACHE -90</tt></li>
</ol>
</li>
<li>Check if it is running by:
<ol type="1" start="1">
<li>&gt; <tt>cd ~/Tools/lenovo-throttling-fix</tt></li>
<li>&gt; <tt>./lenovo_fix.py --monitor</tt></li>
</ol></li>
</ol></li>
</ol>
</p>

<h2>Getting trackpad gestures working</h2>

<p>
Install <tt>libinput-gestures</tt> - <a href="https://github.com/bulletmark/libinput-gestures" title="https://github.com/bulletmark/libinput-gestures" class="https">https://github.com/bulletmark/libinput-gestures</a><br>
Install the gestures GUI - <a href="https://gitlab.com/cunidev/gestures" title="https://gitlab.com/cunidev/gestures" class="https">https://gitlab.com/cunidev/gestures</a>
</p>

<p>
<b><u>USE THIS BACKED UP GESTURES CONF FILE</u>: <a href="./Faaiz_Linux_Config/Gestures.conf" title="./Gestures.conf" class="file">./Gestures.conf</a></b>
</p>

<h2>Thunderbolt Dock</h2>

<p>
To default to onboard audio (not thunderbolt output):<br>
<ol type="1" start="1">
<li>Run <tt>pactl list short sinks</tt> </li>
<li>The name of the onboard device is something like: <tt>alsa_output.pci-0000_00_1f.3.analog-stereo</tt> </li>
<li>Then add a startup command: <tt>pactl set-default-sink alsa_output.pci-0000_00_1f.3.analog-stereo</tt> </li>
<li>Add a 10 sec delay if you want</li>
</ol>
</p>

<h2>Backing up installed programs</h2>

<div class="zim-object">
<pre><code class="sh"># Create backup list

$ apt list --manual-installed | sed -E 's|([^/]+).*|\1|' &gt; my_package_list.txt

# THen, restore by

$ sudo apt -y install $(&lt;my_package_list.txt)
</code></pre>
</div>

<br>
<br>
<br>
<br>
<br>
<br>
<br>



<!-- End wiki content -->



  </div>
</main>

    <footer id="footer">
  <div class="container has-padding is-flex">
    <ul class="links">
      
      
    </ul>
    <div class="copyright">
       &copy; 2021 Faaiz Ajaz
      
    </div>
  </div>
</footer>

<script>
    window.FluencyCopyIcon = '\n\n\n\n\n\n\n\u003csvg xmlns=\u0027http:\/\/www.w3.org\/2000\/svg\u0027 class=\u0027ionicon\u0027 viewBox=\u00270 0 512 512\u0027\u003e\u003crect x=\u0027128\u0027 y=\u0027128\u0027 width=\u0027336\u0027 height=\u0027336\u0027 rx=\u002757\u0027 ry=\u002757\u0027 stroke-linejoin=\u0027round\u0027 class=\u0027ionicon-fill-none ionicon-stroke-width\u0027\/\u003e\u003cpath d=\u0027M383.5 128l.5-24a56.16 56.16 0 00-56-56H112a64.19 64.19 0 00-64 64v216a56.16 56.16 0 0056 56h24\u0027 stroke-linecap=\u0027round\u0027 stroke-linejoin=\u0027round\u0027 class=\u0027ionicon-fill-none ionicon-stroke-width\u0027\/\u003e\u003c\/svg\u003e\n\n\n\n\n\n\n\n\n\n\n'
</script>


<script defer src="./js/main.min.7685c4d03abca7fd02a772a2e64c7a8aa3a7031024bbab70a17975e8928cb004.js" integrity="sha256-doXE0Dq8p/0Cp3Ki5kx6iqOnAxAku6twoXl16JKMsAQ=" crossorigin="anonymous" async></script>




<noscript>
<style type=text/css>#theme-selector-button{display:none}</style>
</noscript>




  <script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script></body>
</html>
